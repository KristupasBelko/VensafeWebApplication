(this["webpackJsonpreact-for-web"]=this["webpackJsonpreact-for-web"]||[]).push([[0],{107:function(e,t,a){e.exports=a(136)},112:function(e,t,a){},136:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(12),c=a.n(o);a(112),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l=a(52),i=a(74),u=a(75),s=a(98),m=a(97),d=a(11),f=a(7),E=a(160),b=a(162),p=a(175),g=a(163),h=a(174),v=a(139),y=a(50),C=a(164),O=a(165),j=a(166),N=a(177),S=a(167),w=a(168),k=a(176),I=a(159),x=a(55),B=a.n(x),T=a(86),P=a.n(T),A=a(85),R=a.n(A),F=a(83),J=a.n(F),L=a(84),W=a.n(L),D=a(18),H=Object(D.a)(),_=a(28),q=a(76),M=a(53),z=a.n(M),G="https://localhost:44378/api/StoreApi";var U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G;return{fetchCategories:function(){return z.a.post(e+"/GetProductsByStoreId",JSON.stringify(ne.getState().storeId),{headers:{"Content-Type":"application/json"}})},buyProducts:function(t){return z.a.post(e+"/GetTicketByStoreId",t)}}},Y="CREATE_TICKET",K="FETCH_PRODUCTS",X="CART_DATA",$="STORE_ID",Q=function(){return U().fetchCategories()},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.type===K?t.payload:e},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return t.type===Y?t.payload:e},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.type===X?t.payload:e},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return t.type===$?t.payload:e},ae=Object(_.c)({products:V,base64:Z,productsInCart:ee,storeId:te}),ne=Object(_.e)(ae,Object(_.d)(Object(_.a)(q.a))),re=a(78),oe=a.n(re),ce=a(79),le=a.n(ce),ie=Object(I.a)((function(){return{fullScreen:{height:"100vh"},center:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"},button:{borderColor:"white",color:"white",height:"70px"},blueColor:{color:"#305f7a"},logo:{height:"5%",position:"absolute",top:"auto",bottom:0,right:0,margin:5},info:{width:"100%"},infoButton:{position:"absolute",top:0,bottom:"auto",right:0,margin:5}}}));var ue=function(){var e=ie(),t=Object(n.useState)(""),a=Object(f.a)(t,2),o=a[0],c=a[1],l=Object(n.useState)(!1),i=Object(f.a)(l,2),u=i[0],s=i[1],m=Object(n.useState)(!1),d=Object(f.a)(m,2),I=d[0],x=d[1],T=Object(n.useState)(!1),A=Object(f.a)(T,2),F=A[0],L=A[1];return r.a.createElement(E.a,{container:!0,direction:"column",className:e.fullScreen},r.a.createElement(b.a,{onClick:function(){L(!0)},className:e.infoButton},r.a.createElement(J.a,{style:{color:"white"}})),r.a.createElement(p.a,{open:F},r.a.createElement(g.a,null,r.a.createElement(E.a,{container:!0,justify:"center",alignItems:"center"},r.a.createElement("img",{src:le.a,alt:"Info",className:e.info}),r.a.createElement(h.a,{mt:2},r.a.createElement(v.a,{style:{width:"200px"},onClick:function(){L(!1)},variant:"outlined",startIcon:r.a.createElement(W.a,null)},"Close"))))),r.a.createElement(E.a,{container:!0,direction:"column",alignItems:"center",className:e.center},r.a.createElement(y.a,{variant:"overline",style:{fontSize:"15px",color:"white",top:0}},"CHOOSE STORE:"),r.a.createElement(C.a,{orientation:"vertical"},r.a.createElement(v.a,{className:e.button,variant:"outlined",startIcon:r.a.createElement(R.a,null)},"scan qr"),r.a.createElement(v.a,{onClick:function(){x(!0)},className:e.button,variant:"outlined",startIcon:r.a.createElement(P.a,null)},"Stores Nearby"),r.a.createElement(v.a,{onClick:function(){s(!0)},className:e.button,variant:"outlined",startIcon:r.a.createElement(B.a,null)},"TYPE STORE ID")),r.a.createElement(p.a,{onClose:function(){x(!1)},open:I},r.a.createElement(g.a,{style:{backgroundColor:"#396480"}},r.a.createElement(E.a,{container:!0,justify:"center",alignItems:"center"},r.a.createElement(y.a,{variant:"overline",style:{color:"white"}},"Stores Nearby"),r.a.createElement(O.a,{style:{width:"200px",backgroundColor:"#fafaff"}},r.a.createElement(j.a,{component:"nav","aria-label":"main mailbox folders"},r.a.createElement(N.a,{button:!0},r.a.createElement(S.a,{className:e.blueColor,primary:"RIMI"})),r.a.createElement(w.a,null),r.a.createElement(N.a,{button:!0},r.a.createElement(S.a,{className:e.blueColor,primary:"MAXIMA"}))))))),r.a.createElement(p.a,{onClose:function(){s(!1)},open:u},r.a.createElement(g.a,{style:{backgroundColor:"#396480"}},r.a.createElement(E.a,{container:!0,justify:"center",alignItems:"center"},r.a.createElement(O.a,{style:{width:"80%",backgroundColor:"#fafaff"}},r.a.createElement(E.a,null,r.a.createElement(b.a,{disabled:!0},r.a.createElement(B.a,{className:e.blueColor})),r.a.createElement(k.a,{style:{width:"65%"},className:e.blueColor,onChange:function(e){return c(e.target.value)},placeholder:"Insert Store Id"}))),r.a.createElement(h.a,{mt:2},r.a.createElement(v.a,{style:{color:"white",borderColor:"white"},variant:"outlined",onClick:function(){return console.log(o),ne.dispatch({type:$,payload:o}),void H.push("/mainPage")}},"Accept")))))),r.a.createElement("img",{src:oe.a,alt:"Logo",className:e.logo}))};var se=function(){return r.a.createElement(ue,null)},me=a(36),de=a(31),fe=a(169),Ee=a(170),be=a(171),pe=a(87),ge=a.n(pe),he=a(92),ve=a.n(he),ye=a(89),Ce=a.n(ye),Oe=a(88),je=a.n(Oe),Ne=a(90),Se=a.n(Ne),we=a(93),ke=a.n(we),Ie=a(91),xe=a.n(Ie),Be=Object(I.a)((function(e){return{appBar:{top:"auto",bottom:0,height:70,backgroundColor:"#396480"},card:{width:"90%",position:"relative",height:370},list:{height:320,maxHeight:320,overflow:"auto",position:"relative"},cart:{position:"absolute",right:"0%",transform:"translate(-50%, -50%)"},center:{display:"flex",alignItems:"center",justifyContent:"center"},fullScreen:{height:"100vh"},ticketButton:{borderColor:"white",color:"white"},emptyCart:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"},blueColor:{color:"#305f7a"}}}));var Te={createTicket:function(e){return function(t,a){var n={Products:e,StoreId:a().storeId};U().buyProducts(n).then((function(e){t({type:Y,payload:e.data})})).catch((function(e){return console.log(e)}))}}},Pe=Object(de.b)((function(e){return{barcode64:e.base64}}),Te)((function(e){var t=e.barcode64,a=e.createTicket,o=Be(),c=Object(n.useState)([]),l=Object(f.a)(c,2),i=l[0],u=l[1],s=Object(n.useState)(0),m=Object(f.a)(s,2),d=m[0],y=m[1],C=Object(n.useState)(!1),k=Object(f.a)(C,2),I=k[0],x=k[1],B=Object(n.useState)(!0),T=Object(f.a)(B,2),P=T[0],A=T[1],R=Object(n.useState)(!1),F=Object(f.a)(R,2),J=F[0],L=F[1];Object(n.useEffect)((function(){0!==Object.keys(i).length?(A(!1),W()):A(!0)}),[i]),Object(n.useEffect)((function(){u(ne.getState().productsInCart)}),[]),Object(n.useEffect)((function(){L(!0)}),[t]);var W=function(){var e=0;i.forEach((function(t){return e=t.price+e})),y(_(e))},D=function(){y(0),u([])},_=function(e){var t=Number(e).toFixed(2);return Number(t)},q=function(){var e=JSON.parse(window.localStorage.getItem("ProductsInStorage"));if(null===e){var t=JSON.stringify(i);window.localStorage.setItem("ProductsInStorage",t)}else{e=[].concat(Object(me.a)(e),Object(me.a)(i));var a=JSON.stringify(e);window.localStorage.setItem("ProductsInStorage",a)}},M=function(){x(!0)};return r.a.createElement(E.a,{className:o.fullScreen},r.a.createElement(h.a,{mt:2,mb:2},r.a.createElement(E.a,{container:!0,direction:"row"},r.a.createElement(v.a,{onClick:function(){return ne.dispatch({type:X,payload:i}),void H.push("/mainPage")}},r.a.createElement(ge.a,{style:{color:"white"}})),r.a.createElement("h3",{style:{color:"white"},className:o.cart},"CART"))),r.a.createElement(E.a,{container:!0,className:o.center},r.a.createElement(O.a,{style:{backgroundColor:"#fafaff"},className:o.card},0===i.length?r.a.createElement("div",{className:o.emptyCart},r.a.createElement("div",null,r.a.createElement(je.a,{className:o.blueColor}))):r.a.createElement("div",null,r.a.createElement(E.a,null,r.a.createElement(j.a,{className:o.list},i.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement(N.a,null,r.a.createElement(S.a,{primary:r.a.createElement(E.a,null,r.a.createElement(E.a,{container:!0,direction:"row",justify:"space-between"},r.a.createElement("div",{className:o.blueColor,style:{fontWeight:"bold"}},e.productName),r.a.createElement("div",{className:o.blueColor},e.price," \u20ac")),r.a.createElement("div",{className:o.blueColor},e.description))}),r.a.createElement(b.a,{className:o.blueColor,onClick:function(){return a=t,y(_(d-e.price)),i.splice(a,1),void u(Object(me.a)(i));var a}},r.a.createElement(Ce.a,null))),r.a.createElement(w.a,null))})))),r.a.createElement(v.a,{variant:"contained",color:"secondary",onClick:function(){return D()},startIcon:r.a.createElement(Se.a,null)},"Remove All"))),""===t?r.a.createElement(h.a,{mt:2},r.a.createElement("div",{style:{color:"white"}},"Ticket is not generated yet.")):r.a.createElement(h.a,{mt:1.5},r.a.createElement(v.a,{startIcon:r.a.createElement(xe.a,null),variant:"outlined",onClick:M,className:o.ticketButton,style:{width:"30vh"}},"Ticket"),r.a.createElement(p.a,{style:{postition:"absolute",top:0,bottom:"auto"},onClose:function(){x(!1)},open:I},r.a.createElement(g.a,null,J?r.a.createElement(E.a,{container:!0,direction:"column",className:o.center},r.a.createElement("img",{src:"data:image/jpeg;base64,".concat(t),alt:"barcode"}),r.a.createElement(ve.a,null),r.a.createElement("div",null,"Scan this ticket")):r.a.createElement(fe.a,{className:o.blueColor}))))),r.a.createElement(Ee.a,{position:"fixed",color:"primary",className:o.appBar},r.a.createElement(be.a,null,r.a.createElement(E.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement("h2",null,"total: ",d," \u20ac"),r.a.createElement(v.a,{className:o.ticketButton,disabled:P,onClick:function(){return L(!1),a(i),D(),M(),void q()},variant:"outlined",startIcon:r.a.createElement(ke.a,null)},"BUY")))))})),Ae=a(172),Re=a(94),Fe=a.n(Re),Je=Object(I.a)((function(e){return{appBar:{backgroundColor:"#396480"}}}));var Le=function(e){var t=e.quantityInCart,a=Je();return r.a.createElement(E.a,null,r.a.createElement(Ee.a,{position:"static",className:a.appBar},r.a.createElement(be.a,null,r.a.createElement(E.a,{className:a.menuButton},r.a.createElement(b.a,{edge:"start",color:"inherit",onClick:function(){return H.push("/shoppingCart")}},r.a.createElement(Ae.a,{badgeContent:t,color:"secondary"},r.a.createElement(Fe.a,null)))))))},We=a(49),De=a(173),He=a(57),_e=a.n(He),qe=a(58),Me=a.n(qe),ze=a(56),Ge=a.n(ze),Ue=a(95),Ye=a.n(Ue),Ke=a(96),Xe=a.n(Ke),$e=Object(I.a)((function(e){return{nested:{paddingLeft:e.spacing(3)},card:{position:"relative",backgroundColor:"#f7f5f5"},fullScreen:{height:"90vh"},textField:{color:"white"},blueColor:{color:"#305f7a"},center:{position:"absolute",left:"50%",top:"50%"}}}));var Qe={fetchAsync:function(){return Q}},Ve=Object(de.b)((function(e,t){return{productsFromApi:e.products,ownProps:t}}),Qe)((function(e){var t=e.ownProps,a=e.fetchAsync,o=$e(),c=Object(n.useState)(!0),l=Object(f.a)(c,2),i=l[0],u=l[1],s=Object(n.useState)(!0),m=Object(f.a)(s,2),d=m[0],v=m[1],C=Object(n.useState)(!1),I=Object(f.a)(C,2),x=I[0],B=I[1],T=Object(n.useState)(!1),P=Object(f.a)(T,2),A=P[0],R=P[1],F=Object(n.useState)([]),J=Object(f.a)(F,2),L=J[0],W=J[1],D=Object(n.useState)(""),_=Object(f.a)(D,2),q=_[0],M=_[1],z=Object(n.useState)([]),G=Object(f.a)(z,2),U=G[0],Y=G[1],$=Object(n.useState)(!0),Q=Object(f.a)($,2),V=Q[0],Z=Q[1],ee=Object(n.useState)([]),te=Object(f.a)(ee,2),ae=te[0],re=te[1];Object(n.useEffect)((function(){ie()}),[]),Object(n.useEffect)((function(){re(U.filter((function(e){return e.brands.find((function(e){return e.brandName.toLowerCase().includes(q.toLowerCase())}))}))),ae.forEach((function(e){var t=ae.indexOf(e);i[t]||ue(t)}))}),[q,U]);var oe=function(){var e=JSON.parse(window.localStorage.getItem("ProductsInStorage"));console.log("storage inside",e),null!==e&&W(ce(e))},ce=function(e){var t=[];return e.forEach((function(a){le(e,a)>3&&!t.some((function(e){return e.productCode===a.productCode}))&&ne.getState().products.some((function(e){return e.brands.find((function(e){return e.products.find((function(e){return e.productCode===a.productCode}))}))}))&&t.push(a)})),console.log("mostlybought products",t),t},le=function(e,t){return e.reduce((function(e,a){return t.productCode===a.productCode?e+1:e}),0)},ie=function(){0===ne.getState().products.length?a().then((function(e){Y(e.data),Z(!1),console.log("products fetched:",e.data),ne.dispatch({type:K,payload:e.data}),oe()})).catch((function(e){console.log(e),H.push("/")})):(Y(ne.getState().products),Z(!1),oe())},ue=function(e){u(Object(We.a)({},e,!i[e]))},se=function(e,a){e.stock>le(ne.getState().productsInCart,e)?(ne.dispatch({type:X,payload:[].concat(Object(me.a)(ne.getState().productsInCart),[e])}),console.log("products in cart:",ne.getState().productsInCart),t.onIncrement()):B(Object(We.a)({},a,!0))};return r.a.createElement(E.a,{className:o.fullScreen},V||void 0===U?r.a.createElement("div",null,r.a.createElement(fe.a,{className:o.center,style:{color:"white"}})):r.a.createElement(E.a,null,r.a.createElement(h.a,{m:2},r.a.createElement(O.a,{style:{backgroundColor:"#fafaff"}},r.a.createElement(E.a,{container:!0,direction:"row",justify:"space-between"},r.a.createElement(E.a,null,r.a.createElement(b.a,{disabled:!0},r.a.createElement(Ye.a,{className:o.blueColor})),r.a.createElement(k.a,{className:o.blueColor,placeholder:"Search For Brand",onChange:function(e){return M(e.target.value)}})),r.a.createElement(b.a,{onClick:function(){R(!0)}},r.a.createElement(Ae.a,{badgeContent:Object.keys(L).length,color:"primary"},r.a.createElement(Xe.a,{style:{color:"#c2bf76"}}))),r.a.createElement(p.a,{onClose:function(){R(!1)},open:A},r.a.createElement(g.a,null,0===Object.keys(L).length?r.a.createElement("div",null," No favourite products yet. "):r.a.createElement(E.a,null,r.a.createElement("div",{className:o.blueColor},"Favorite products:"),r.a.createElement(j.a,null,L.map((function(e,t){return r.a.createElement(N.a,{key:t},r.a.createElement(S.a,{primary:r.a.createElement(E.a,null,r.a.createElement(E.a,{container:!0,direction:"row",justify:"space-between"},r.a.createElement("div",{className:o.blueColor,style:{fontWeight:"bold"}},e.productName)),r.a.createElement("div",{className:o.blueColor},e.description))}),r.a.createElement(b.a,{disabled:x[t],onClick:function(){return se(e,t)},variant:"contained",color:"primary"},r.a.createElement(Ge.a,{className:o.blueColor})))}))))))))),r.a.createElement(h.a,{m:2},r.a.createElement(O.a,{style:{backgroundColor:"#fafaff"}},r.a.createElement(E.a,null,r.a.createElement(j.a,{component:"nav","aria-label":"main mailbox folders",style:{overflow:"auto",maxHeight:400}},ae.map((function(e,t){return r.a.createElement(r.a.Fragment,{key:t},r.a.createElement(N.a,{button:!0,component:"a",onClick:function(){return ue(t)},variant:"contained",color:"primary"},r.a.createElement(S.a,{primary:r.a.createElement(y.a,{className:o.blueColor,style:{fontWeight:"bold"},variant:"button",display:"block",gutterBottom:!0},e.groupName)}),i[t]?r.a.createElement(_e.a,{className:o.blueColor}):r.a.createElement(Me.a,{className:o.blueColor})),r.a.createElement(De.a,{in:i[t],timeout:"auto",unmountOnExit:!0},r.a.createElement(j.a,null,e.brands.map((function(e,t){return r.a.createElement(E.a,{key:t},e.brandName.toLowerCase().includes(q.toLowerCase())&&r.a.createElement(E.a,null,r.a.createElement(N.a,{key:t,button:!0,className:o.nested,onClick:function(){return function(e){v(Object(We.a)({},e,!d[e]))}(t)}},r.a.createElement(S.a,{primary:r.a.createElement(y.a,{className:o.blueColor,style:{fontSize:14},variant:"overline",gutterBottom:!0},e.brandName)}),d[t]?r.a.createElement(_e.a,{className:o.blueColor}):r.a.createElement(Me.a,{className:o.blueColor})),r.a.createElement(De.a,{in:d[t],timeout:"auto",unmountOnExit:!0},r.a.createElement(j.a,null,e.products.map((function(e,t){return r.a.createElement(E.a,{key:t},r.a.createElement(N.a,{className:o.nested},r.a.createElement(S.a,{primary:r.a.createElement(E.a,null,r.a.createElement(E.a,{container:!0,direction:"row",justify:"space-between"},r.a.createElement("div",{className:o.blueColor,style:{fontWeight:"bold"}},e.productName),r.a.createElement("div",{className:o.blueColor},e.price," ","\u20ac")),r.a.createElement("div",{className:o.blueColor},e.description))}),r.a.createElement(b.a,{disabled:x[t],onClick:function(){return se(e,t)},variant:"contained",color:"primary"},r.a.createElement(Ge.a,{className:o.blueColor}))),r.a.createElement(w.a,null))}))))))})))))}))))))))}));var Ze=function(){var e=Object(n.useState)(0),t=Object(f.a)(e,2),a=t[0],o=t[1];return Object(n.useEffect)((function(){var e=Object.keys(ne.getState().productsInCart).length;o(e)}),[]),r.a.createElement(E.a,null,r.a.createElement(Le,{quantityInCart:a}),r.a.createElement(Ve,{onIncrement:function(){o(a+1)}}))},et=function(e){Object(s.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement(d.b,{history:H},r.a.createElement(d.c,null,r.a.createElement(d.a,{path:"/",exact:!0,component:se}),r.a.createElement(d.a,{path:"/shoppingCart",exact:!0,component:Pe}),r.a.createElement(d.a,{path:"/mainPage",exact:!0,component:Ze})))}}]),a}(n.Component);c.a.render(r.a.createElement(de.a,{store:ne},r.a.createElement(l.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(et,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},78:function(e,t,a){e.exports=a.p+"static/media/strong.logo.72af9e77.png"},79:function(e,t,a){e.exports=a.p+"static/media/info.cc33c05a.png"}},[[107,1,2]]]);
//# sourceMappingURL=main.2f48e3f3.chunk.js.map